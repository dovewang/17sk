/*
Copyright 2013, KISS UI Library v0.7.2
MIT Licensed
build time: Jan 25 16:05
*/(function(){Selection=function(a){this.document=a||document};Selection.index=-1;Selection.items=[];Selection.isTextRange=function(a){return!!a&&"undefined"!=typeof a.text};Selection.toStandardRange=function(a,b){function d(a,c,d){var j=b.createElement("a"),h=c.duplicate();h.collapse(d);var o=h.parentElement();do o.insertBefore(j,j.previousSibling),h.moveToElementText(j);while(0<h.compareEndPoints(d?"StartToStart":"StartToEnd",c)&&j.previousSibling);if(-1==h.compareEndPoints(d?"StartToStart":"StartToEnd",
c)&&j.nextSibling)h.setEndPoint(d?"EndToStart":"EndToEnd",c),a[d?"setStart":"setEnd"](j.nextSibling,h.text.length);else a[d?"setStartBefore":"setEndBefore"](j);j.parentNode.removeChild(j)}if(!Selection.isTextRange(a))return a;var c=new Range(b);d(c,a,!0);d(c,a,!1);return c};Selection.prototype={get:function(){if(window.getSelection)this.selection=window.getSelection();else{if(this.document.getSelection)return this.document.getSelection();this.document.selection&&(this.selection=this.document.selection)}return this.selection},
text:function(){var a=this.get();window.getSelection||(a=a.createRange());return(null==a.text?a:a.text).toString()},range:function(a){void 0===a&&(a=++Selection.index);var b=this.get();b.getRangeAt&&0<b.rangeCount?Selection.items[a]=b.getRangeAt(0):(b=this.document.selection.createRange(),Selection.items[a]=b);return Selection.items[a]},restore:function(a){void 0===a&&(a=0);var b;window.getSelection?(window.getSelection().removeAllRanges(),window.getSelection().addRange(Selection.items[a])):this.document.body.createTextRange&&
(b=this.document.body.createTextRange(),b.moveToBookmark(Selection.items[a]),b.select())},restoreAll:function(){if(window.getSelection){var a=window.getSelection();a.removeAllRanges();for(var b=0;b<Selection.items.length;b++)a.addRange(Selection.items[b])}else alert("\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u64cd\u4f5c")},clear:function(){Selection.items=[]},html:function(a){var b=this.range(),d=this.document;if(Selection.isTextRange(b)&&b.pasteHTML)b.select(),b.pasteHTML(a);else if(b.deleteContents&&b.insertNode){a=d.createElement("div");
a.innerHTML=html;for(var d=[],c=0;c<a.childNodes.length;c++)d.push(a.childNodes[c]);b.deleteContents();for(c in d)a.removeChild(d[c]),b.insertNode(d[c])}}}})();
(function(){var a=0;Range=function(b){this.startContainer=b;this.startOffset=0;this.endContainer=b;this.endOffset=0;this.collapsed=!0;this.document=b};Range.updateCollapse=function(b){b.collapsed=b.startContainer&&b.endContainer&&b.startContainer===b.endContainer&&b.startOffset==b.endOffset;return b};Range.execContentsAction=function(b,a){var c=b.startContainer,g=b.endContainer,f=b.startOffset,k=b.endOffset,j=b.document,h=j.createDocumentFragment(),o,e;1==c.nodeType&&(c=c.childNodes[f]||(o=c.appendChild(j.createTextNode(""))));
1==g.nodeType&&(g=g.childNodes[k]||(e=g.appendChild(j.createTextNode(""))));if(c===g&&3==c.nodeType)return h.appendChild(j.createTextNode(c.substringData(f,k-f))),a&&(c.deleteData(f,k-f),b.collapse(!0)),h;for(var m,p,l=h,i=$(c).parent().andSelf(),q=$(g).parent().andSelf(),n=0;i[n]==q[n];)n++;for(var r=n,s;s=i[r];r++){m=s.nextSibling;s==c?o||(3==b.startContainer.nodeType?(l.appendChild(j.createTextNode(c.nodeValue.slice(f))),a&&c.deleteData(f,c.nodeValue.length-f)):l.appendChild(!a?c.cloneNode(!0):
c)):(p=s.cloneNode(!1),l.appendChild(p));for(;m&&!(m===g||m===q[r]);)s=m.nextSibling,l.appendChild(!a?m.cloneNode(!0):m),m=s;l=p}l=h;i[n]||(l.appendChild(i[n-1].cloneNode(!1)),l=l.firstChild);for(r=n;f=q[r];r++){m=f.previousSibling;f==g?!e&&3==b.endContainer.nodeType&&(l.appendChild(j.createTextNode(g.substringData(0,k))),a&&g.deleteData(0,k)):(p=f.cloneNode(!1),l.appendChild(p));if(r!=n||!i[n])for(;m&&m!==c;)f=m.previousSibling,l.insertBefore(!a?m.cloneNode(!0):m,l.firstChild),m=f;l=p}a&&b.setStartBefore(!q[n]?
q[n-1]:!i[n]?i[n-1]:q[n]).collapse(!0);o&&$(o).remove();e&&$(e).remove();return h};Range.prototype={getCommonAncestor:function(){function b(b){for(var a=[];b;)a.push(b),b=b.parentNode;return a}for(var a=b(this.startContainer),c=b(this.endContainer),g=0,f=a.length,k=c.length,j,h;++g&&!(j=a[f-g],h=c[k-g],!j||!h||j!==h););return a[f-g+1]},setStart:function(b,a){var c=this.document;this.startContainer=b;this.startOffset=a;this.endContainer===c&&(this.endContainer=b,this.endOffset=a);return Range.updateCollapse(this)},
setEnd:function(b,a){var c=this.document;this.endContainer=b;this.endOffset=a;this.startContainer===c&&(this.startContainer=b,this.startOffset=a);return Range.updateCollapse(this)},setStartBefore:function(b){return this.setStart(b.parentNode||this.document,$(b).index())},setStartAfter:function(b){return this.setStart(b.parentNode||this.document,$(b).index()+1)},setEndBefore:function(b){return this.setEnd(b.parentNode||this.document,$(b).index())},setEndAfter:function(b){return this.setEnd(b.parentNode||
this.document,$(b).index()+1)},setStartAtFirst:function(b){return this.setStart(b,0)},setStartAtLast:function(b){return this.setStart(b,3==b.nodeType?b.nodeValue.length:b.childNodes.length)},selectNode:function(b){return this.setStartBefore(b).setEndAfter(b)},selectNodeContents:function(b){return this.setStart(b,0).setEndAtLast(b)},collapse:function(b){return b?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(b,a){var c,
g,f,k;switch(b){case 0:case 1:c=this.startContainer;g=this.startOffset;break;case 2:case 3:c=this.endContainer,g=this.endOffset}switch(b){case 0:case 3:f=a.startContainer;k=a.startOffset;break;case 1:case 2:f=a.endContainer,k=a.endOffset}return c.sourceIndex<f.sourceIndex?-1:c.sourceIndex==f.sourceIndex?g<k?-1:g==k?0:1:1},cloneRange:function(){return(new Range(this.document)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},cloneContents:function(){return this.collapsed?
null:Range.execContentsAction(this,0)},deleteContents:function(){var b;this.collapsed||Range.execContentsAction(this,1);webkit&&(b=this.startContainer,3==b.nodeType&&!b.nodeValue.length&&(this.setStartBefore(b).collapse(!0),$(b).remove()));return this},extractContents:function(){return this.collapsed?null:Range.execContentsAction(this,2)},insertNode:function(b){var a=this.startContainer,c=this.startOffset,g=this.endContainer,f=this.endOffset,k,j,h,o=1;"#document-fragment"===b.nodeName.toLowerCase()&&
(k=b.firstChild,j=b.lastChild,o=b.childNodes.length);1==a.nodeType?(h=a.childNodes[c])?(a.insertBefore(b,h),a===g&&(f+=o)):a.appendChild(b):3==a.nodeType&&(0===c?(a.parentNode.insertBefore(b,a),a.parentNode===g&&(f+=o)):c>=a.nodeValue.length?a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b):(h=0<c?a.splitText(c):a,a.parentNode.insertBefore(b,h),a===g&&(g=h,f-=c)));k?this.setStartBefore(k).setEndAfter(j):this.selectNode(b);return 1<=this.compareBoundaryPoints(2,this.cloneRange().setEnd(g,
f))?this:this.setEnd(g,f)},surroundContents:function(b){b.appendChild(this.extractContents());return this.insertNode(b).selectNode(b)},html:function(){return $(this.cloneContents()).wrap("<div></div>").html()},enlarge:function(b,a){pre;node;tmp=this.document.createTextNode("");if(b){node=this.startContainer;1==node.nodeType?node.childNodes[this.startOffset]?pre=node=node.childNodes[this.startOffset]:(node.appendChild(tmp),pre=node=tmp):pre=node;for(;;){if(dom.isBlock(node)){for(node=pre;(pre=node.previousSibling)&&
!dom.isBlock(pre);)node=pre;this.setStartBefore(node);break}pre=node;node=node.parentNode}node=this.endContainer;1==node.nodeType?((pre=node.childNodes[this.endOffset])?node.insertBefore(tmp,pre):node.appendChild(tmp),pre=node=tmp):pre=node;for(;;){if(dom.isBlock(node)){for(node=pre;(pre=node.nextSibling)&&!dom.isBlock(pre);)node=pre;this.setEndAfter(node);break}pre=node;node=node.parentNode}tmp.parentNode===this.endContainer&&this.endOffset--;$(tmp).remove()}if(!this.collapsed){for(;0==this.startOffset&&
(!a||!a(this.startContainer))&&!$(this.startContainer).is("body");)this.setStartBefore(this.startContainer);for(;this.endOffset==(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)&&(!a||!a(this.endContainer))&&!$(this.endContainer).is("body");)this.setEndAfter(this.endContainer)}return this},shrink:function(){function b(a){return 1==a.nodeType&&!Editor.dtd.$empty[a.tagName]&&!Editor.dtd.$nonChild[a.tagName]}for(var a,c=this.collapsed;1==this.startContainer.nodeType&&
(a=this.startContainer.childNodes[this.startOffset])&&b(a);)this.setStart(a,0);if(c)return this.collapse(c);for(;1==this.endContainer.nodeType&&0<this.endOffset&&(a=this.endContainer.childNodes[this.endOffset-1])&&b(a);)this.setEnd(a,a.childNodes.length);return this},createContextualFragment:function(a){var d=(dom.isDataNode(this.startContainer)?this.startContainer.parentNode:this.startContainer).cloneNode(!1);$(d).html(a);for(a=this.document.createDocumentFragment();d.firstChild;)a.appendChild(d.firstChild);
return a},optimize:function(){},trim:function(){},createBookmark:function(b){var d,c=$('<span style="display:none;"></span>',this.document)[0];c.id="__editor_bookmark_start_"+a++ +"__";this.collapsed||(d=c.cloneNode(!0),d.id="__editor_bookmark_end_"+a++ +"__");d&&this.cloneRange().collapse(!1).insertNode(d).setEndBefore(d);this.insertNode(c).setStartAfter(c);return{start:b?"#"+c.id:c,end:d?b?"#"+d.id:d:null}},moveToBookmark:function(a){var d=this.document,c=$(a.start,d),a=a.end?$(a.end,d):null;if(!c||
1>c.length)return this;this.setStartBefore(c[0]);c.remove();a&&0<a.length?(this.setEndBefore(a[0]),a.remove()):this.collapse(!0);return this},scroll:function(){}}})();
(function(){window.ie=$.browser.msie;window.chrome=$.browser.chrome;window.webkit=$.browser.webkit;window.opera=$.browser.opera;window.webkit=$.browser.webkit;window.mozilla=$.browser.mozilla;Editor=function(a,b){b=$.extend({id:"editor"+$.now(),base:Editor.getPath(),focus:!1,designMode:!0,fullscreen:!1,filter:!0,wellFormat:!0,shadow:!0,loadStyleMode:!0,resizeable:!0,readonly:!1,disabled:!1,content:"\u521d\u59cb\u5316\u7684\u5185\u5bb9\uff08\u4f8b\u5982\u4f60\u8fd8\u6ca1\u767b\u5f55\uff0c\u8bf7\u81ea\u884c\u4fee\u6539\uff09",theme:"default",height:"auto",minHeight:"60px",width:"auto",minWidth:"120px",
count:{label:"\u60a8\u5df2\u7ecf\u8f93\u5165#wordcount#\u4e2a\u5b57",mode:"text",min:0,max:5E3,size:function(){}},image:{cropabel:!1,resizeable:!1,capture:!0,url:"/upload/image.html",allowType:/\.(gif|jpg|jpeg|bmp|png)$/,manager:"/filemanager/image.html"},audio:{url:"/upload/image.html",allowType:"mp3|wav|",manager:"/filemanager/audio.html"},video:{uploadable:!1,snapshot:!1,capture:!0,convertible:!1,url:"",allowType:"",manager:"/filemanager/video.html"},voice:{url:""},handwriting:{url:""},plugins:"bold,italic,underline,strikethrough,insertorderedlist,insertunorderedlist,removeformat,image,sketchpad,camera,fullscreen".split(","),
language:"zh_CN",newlineTag:"p",layout:'<div class="editor"><div class="editor-header"></div><div class="editor-body"></div><div class="editor-footer"><div class="wordcount"></div><div class="resize"></div></div></div>',onload:function(){}},b);this.init(a,b);return this};Editor.getPath=function(){for(var a=document.getElementsByTagName("script"),b,d=0,c=a.length;d<c;d++)if(b=a[d].src||"",/editor[\w\-\.]*\.js/.test(b))return b.substring(0,b.lastIndexOf("/")+1);return""};Editor.template=function(a,
b){var d=["",'<html><head><meta charset="utf-8" />','<style type="text/css">',"html {margin:0;padding:0;}","body {margin:0;padding:5px;background:#fff;display: block;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.zeroborder td {border:1px dotted #AAA;}",".placeholder:{color:#999;}","</style>"];a&&$.each(a,function(a,b){b&&d.push('<link href="'+
b+'" rel="stylesheet" />')});b&&d.push("<style>"+b+"</style>");d.push("</head><body></body></html>");return d.join("\n")};Editor.language={};Editor.plugins={};Editor.plugin=function(a,b){return $.each(a.split(","),function(a,c){Editor.plugins[c]=b})};Editor.prototype={contextmenu:!1,data:{history:{},plugins:{}},init:function(a,b){function d(){c.window=c.iframe[0].contentWindow;var a=$.iframe.getDocument(c.iframe[0]);a.open();a.write(Editor.template());a.close();ie?(a.body.disabled=!0,a.body.contentEditable=
!0,a.body.disabled=!1):(a.body.contentEditable=!0,a.body.spellcheck=!1);c.document=a;c.cmd=new Editor.cmd(c);c.count("text",!0);$(c.document).on("click.editor",function(){c.textarea.trigger("click")}).on("keydown.editor",function(a){c.textarea.trigger("keydown");if(a.which==13){a.preventDefault();c.cmd.inserthtml("<br/>\u200b")}}).on("keypress.editor",function(){c.textarea.trigger("keypress")}).on("keyup.editor",function(){c.textarea.trigger("keyup");c.count("text",true)}).on("beforepaste.editor",function(){}).on("paste.editor",
function(){c.count("text",true);c.textarea.trigger("paste")}).on("mouseenter",function(){}).on("mouseleave",function(){}).on("dragenter",function(){}).on("dragover",function(){});$(c.window).on("focus.editor",function(){c.html()==c.data.placeholder&&c.html("")}).on("blur.editor",function(){c.isEmpty()&&c.html(c.data.placeholder)});c.isReady=!0;b.readonly&&c.readonly();b.disabled?(b.content&&c.html(b.content),c.disable()):c.html(isEmpty(c.data.oldvalue)?c.data.placeholder:c.data.oldvalue)}var c=this,
g=location.host.replace(/:\d+/,"")!==document.domain;c.id=b.id;c.designMode=b.designMode;c.language=b.language;c.options=b;c.textarea=$(a);var f=c.textarea.attr("width"),f=f?f:b.width,k=c.textarea.attr("height"),k=k?k:b.height;c.container=$(b.layout).css({width:f});c.header=c.container.find(".editor-header").on("contextmenu",function(a){a.preventDefault()});c.body=c.container.find(".editor-body");c.footer=c.container.find(".editor-footer");c.wordcount=c.footer.find(".wordcount");c.iframe=$('<iframe class="editor-iframe" hidefocus="true" frameborder="0"   src="about:blank"></iframe>').css("width",
"100%");c.body.append(c.iframe);c.textarea.after(c.container);c.body.css("height",k);c.iframe.css("height",k);c.data.oldvalue=a.value;f=c.textarea.attr("placeholder");c.data.placeholder=isEmpty(f)?"":'<div class="placeholder">'+f+"</div>";c.designMode?c.textarea.hide():c.iframe.hide();if(g)c.iframe.on("load.editor",function(){c.iframe.off("load");setTimeout(function(){d()},0)});!g&&d();c.toolbar.init(c,b)},ready:function(){},toolbar:{init:function(a,b){$.each(b.plugins,function(b,c){if("|"==c)a.header.append('<span class="divider"></span>');
else{var g=Editor.plugins[c];g&&(g=g(c,a),g.toolbar&&(g.toolbar=g.toolbar.attr("unselectable","on"),a.header.append(g.toolbar)),a.data.plugins[c]=g)}})},enable:function(a){this.editor.data.plugins[a].toolbar.removeClass("disabled")},disable:function(a){this.editor.data.plugins[a].toolbar.addClass("disabled")},disableAll:function(){}},render:function(){},remove:function(){},get:function(a){return this.data.plugins[a]},sync:function(){},i18n:function(a){return Editor.language[this.language][a]},text:function(a){var b=
this.document;if(void 0===a)return $(b.body).text();$(b.body).text(a);return this},html:function(a){var b=this.document;if(void 0===a)return this.isReady?$(b.body).html():this.textarea[0].value;this.isReady?$(b.body).html(a):this.textarea[0].value=a;return this},append:function(a){$(this.document.body).append(a);return this},before:function(a){$(this.document.body).before(a);return this},disable:function(){this.isReady&&(this.document.body.disabled=!0,this.document.body.contentEditable=!1,this.header.addClass("disabled"),
$(this.document.body).css({opacity:0.3}))},enable:function(){this.isReady&&(this.document.body.disabled=!1,this.document.body.contentEditable=!0,this.header.removeClass("disabled"),$(this.document.body).css({opacity:1}))},readonly:function(){this.isReady&&(this.document.body.contentEditable=!1)},isEmpty:function(){return""===this.html().replace(/<(?!img|embed).*?>/ig,"").replace(/&nbsp;/ig," ").trim()},isDirty:function(){return this.data.oldvalue.replace(/\r\n|\n|\r|t/g,"").trim()!==this.html().replace(/\r\n|\n|\r|t/g,
"").trim()},selected:function(a){isEmpty(a,"html");return this.isReady?this.cmd.range.html():""},count:function(a,b){var d=0,a=(a||"html").toLowerCase();if("text"===a&&(d=this.text().replace(/<(?:img|embed).*?>/ig,"E").replace(/\r\n|\n|\r/g,"").length,b)){var c=d;-1!=this.options.count.max&&(c="<em"+(d<=this.options.count.max?"":' class="over" ')+"><span>"+d+"</span>/"+this.options.count.max+"</em>");this.wordcount.html(this.options.count.label.replace("#wordcount#",c))}return d},focus:function(){this.designMode?
this.window.focus():this.textarea[0].focus();return this},blur:function(){if(ie){var a=$('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />');this.container.append(a);a[0].focus();a.remove()}else this.designMode?this.window.blur():this.textarea[0].blur();return this},show:function(a){this.container.show(a)},hide:function(){this.container.hide(fn)},height:function(){},width:function(){},resize:function(){}};Editor.cmd=function(a){this.init(a);return this};
Editor.cmd.getWindow=function(a){if(!a)return window;a=Editor.cmd.getDocument(a);return a.parentWindow||a.defaultView};Editor.cmd.getDocument=function(a){return!a?document:a.ownerDocument||a.document||a};Editor.cmd.getSelection=function(a){Editor.selection||(Editor.selection=new Selection(a));return Editor.selection};Editor.cmd.getRange=function(a){return new Range(a)};Editor.cmd.prototype={init:function(a){this.editor=a;this.document=a.document;this.window=a.window;this.sel=Editor.cmd.getSelection(this.document);
this.range=Editor.cmd.getRange(this.document)},val:function(a){var b="";try{b=this.document.queryCommandValue(a)}catch(d){}"string"!==typeof b&&(b="");return b},exec:function(a,b){try{this.document.execCommand(a,!1,b)}catch(d){}},state:function(a){var b=this.document,d=!1;try{d=b.queryCommandState(a)}catch(c){}return d},selection:function(){},select:function(){},toggle:function(){},bold:function(){this.exec("Bold")},italic:function(){this.exec("Italic")},underline:function(){this.exec("Underline")},
strikethrough:function(){this.exec("Strikethrough")},forecolor:function(){},hilitecolor:function(){},fontsize:function(){},fontname:function(a){return this.fontfamily(a)},removeformat:function(){},inserthtml:function(a){this.editor.focus();if(ie)return this.sel.html(a),this;this.exec("inserthtml",a);return this},hr:function(){return this.inserthtml("<hr/>")},print:function(){this.window.print();return this},insertimage:function(a,b,d,c,g,f){b=isEmpty(b,"");a=['<img src="'+a+'" source="'+a+'" '];d&&
a.push('width="'+d+'" ');c&&a.push('height="'+c+'" ');b&&a.push('title="'+b+'" ');f&&a.push('align="'+f+'" ');a.push('  alt="'+b+'"/>');return this.inserthtml(a.join("  "))},link:function(){},unlink:function(){},selectall:function(){}};$.each("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(a,b){Editor.cmd.prototype[b]=function(a){this.exec(b,a);(!ie||$.inArray(b,["formatblock",
"selectall","insertorderedlist","insertunorderedlist"])>=0)&&this.selection();return this}});Editor.plugin("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough",function(a,b){var d={};d.toolbar=$('<span   class="'+a+'"  title="'+b.i18n(a)+'"></span>').click(function(){b.cmd[a]()});return d});Editor.plugin("fullscreen",function(a,b){var d={};d.toolbar=$('<span   class="'+a+'"  title="'+b.i18n(a)+'"  ></span>').click(function(){b.cmd.inserthtml("\u6d4b\u8bd5<b>21312312312</b>\u63d2\u5165<strong>chuti</strong>")});
return d});Editor.plugin("image",function(a,b){var d={};d.toolbar=$('<span   class="'+a+'"  title="'+b.i18n(a)+'"></span>').click(function(){!$(this).hasClass("disabled")&&!b.options.disabled&&Pop.show({id:b.id+"editor-image",content:['<form  id="'+b.id+'editor-image-form" method="post" onsubmit="return false;" action="/upload/image.html" enctype="multipart/form-data">','<button class="button"  action="upload" file-name="filedata">\u6d4f\u89c8</button></form>'].join(""),title:"\u56fe\u7247\u4e0a\u4f20",css:{"min-height":"200px",
width:"400px"},afterShow:function(a){var d=a.find("form:first");d.find("button[action=upload]").upload();d.find("input:file").change(function(){isEmpty(this.value)||(this.value.is(b.options.image.allowType)?d.postForm(function(d){b.cmd.insertimage(d.msg);Pop.hide(a)}):$.alert.warn("\u60a8\u9009\u62e9\u7684\u56fe\u7247\u683c\u5f0f\u4e0d\u7b26\u5408\u8981\u6c42\uff01"))})}})});d.editor={};return d});Editor.plugin("camera",function(a,b){var d={};d.toolbar=$('<span   class="'+a+'"  title="'+b.i18n(a)+'"></span>').click(function(){Pop.show({id:b.id+"editor-camera",editor:b,
title:"\u62cd\u7167",destory:!0,content:'<iframe id="'+b.id+'camera_iframe_id" name="'+b.id+'camera_iframe" src="/theme/kiss/editor/plugins/camera/camera.jsp" frameborder="0" style="height: 500px;width: 100%;"></iframe>',css:{height:"500px",width:"600px"},afterShow:function(a){var d=eval(b.id+"camera_iframe");$("#"+b.id+"camera_iframe_id").ready(function(){d.bind(function(d){b.cmd.insertimage(d);Pop.hide(a)})})}})});return d});Editor.plugin("sketchpad",function(a,b){var d={};d.toolbar=$('<span   class="'+a+
'"  title="'+b.i18n(a)+'"></span>').click(function(){Pop.show({id:b.id+"editor-sketchpad",title:"\u753b\u677f",content:'<iframe   name="'+b.id+'sketchpad_iframe_name" src="/theme/kiss/sketchpad/sketchpad.htm" frameborder="0" style="height: 480px;width: 100%;" scrolling="no"></iframe>',css:{height:"500px",width:"620px"},footer:'<button   class="button primary" action="insert">\u63d2\u5165</button><button class="button" node-type="pop-close">\u53d6\u6d88</button>',afterShow:function(a){a.find("[action=insert]").click(function(){var d=
eval(b.id+"sketchpad_iframe_name").getImageData();$.post("/upload/data.html",{data:d},function(d){b.cmd.insertimage(d.url);Pop.hide(a)})})}})});return d})})(window);(function(a){a.fn.editor=function(a){return this.each(function(){this.editor||(this.editor=new Editor(this,a));return this})};var b=jQuery.fn.val;a.fn.val=function(a){var c;return this[0]&&(c=this[0].editor)?c.html(a):void 0===a?b.apply(this):b.apply(this,[a])}})(jQuery);
Editor.dtd=function(){function a(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c],e;for(e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a}var b={isindex:1,fieldset:1},d={input:1,button:1,select:1,textarea:1,label:1},c=a({a:1},d),g=a({iframe:1},c),f={hr:1,ul:1,menu:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,blockquote:1,noscript:1,table:1,center:1,
address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},k={ins:1,del:1,script:1,style:1},j=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1,wbr:1},k),h=a({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1,mark:1},j),o=a({p:1},h),d=a({iframe:1},h,d),h={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,
menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,
p:1,em:1,dfn:1},e=a({a:1},d),m={tr:1},p={"#":1},l=a({param:1},h),i=a({form:1},b,g,f,o),q={li:1},n={base:1,link:1,meta:1,title:1},r=a(n,{style:1,script:1}),s={head:1,body:1},t={address:1,blockquote:1,center:1,dir:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,noframes:1,ol:1,p:1,pre:1,
table:1,ul:1};return{$nonBodyContent:a({html:1},s,n),$block:t,$blockLimit:{body:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,td:1,th:1,caption:1,form:1},$inline:e,$body:a({script:1,style:1},t),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,wbr:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},
$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1,audio:1,video:1},$captionBlock:{caption:1,legend:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1,mark:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,
tr:1},html:s,head:r,style:p,script:p,body:i,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:i,td:i,br:{},wbr:{},th:i,center:i,kbd:e,button:a(o,f),basefont:{},h5:e,h4:e,samp:e,h6:e,ol:q,h1:e,h3:e,option:p,h2:e,form:a(b,g,f,o),select:{optgroup:1,option:1},font:e,ins:e,menu:q,abbr:e,label:e,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:e,tfoot:m,cite:e,li:i,input:{},iframe:i,strong:e,textarea:p,noframes:i,big:e,small:e,span:e,hr:{},dt:e,sub:e,
optgroup:{option:1},param:{},bdo:e,"var":e,div:i,object:l,sup:e,dd:i,strike:e,area:{},dir:q,map:a({area:1,form:1,p:1},b,k,f),applet:l,dl:{dt:1,dd:1},del:e,isindex:{},fieldset:a({legend:1},h),thead:m,ul:q,acronym:e,b:e,a:d,blockquote:i,caption:e,i:e,u:e,tbody:m,s:e,address:a(g,o),tt:e,legend:e,q:e,pre:a(j,c),p:e,em:e,dfn:e,section:i,header:i,footer:i,nav:i,article:i,aside:i,figure:i,dialog:i,hgroup:i,mark:e,time:e,meter:e,menu:e,command:e,keygen:e,output:e,progress:l,audio:l,video:l,details:l,datagrid:l,
datalist:l}}();
Editor.language.zh_CN={source:"HTML\u4ee3\u7801",preview:"\u9884\u89c8",undo:"\u540e\u9000(Ctrl+Z)",redo:"\u524d\u8fdb(Ctrl+Y)",cut:"\u526a\u5207(Ctrl+X)",copy:"\u590d\u5236(Ctrl+C)",paste:"\u7c98\u8d34(Ctrl+V)",plainpaste:"\u7c98\u8d34\u4e3a\u65e0\u683c\u5f0f\u6587\u672c",wordpaste:"\u4eceWord\u7c98\u8d34",selectall:"\u5168\u9009(Ctrl+A)",justifyleft:"\u5de6\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justifyright:"\u53f3\u5bf9\u9f50",justifyfull:"\u4e24\u7aef\u5bf9\u9f50",insertorderedlist:"\u7f16\u53f7",insertunorderedlist:"\u9879\u76ee\u7b26\u53f7",indent:"\u589e\u52a0\u7f29\u8fdb",outdent:"\u51cf\u5c11\u7f29\u8fdb",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",formatblock:"\u6bb5\u843d",fontname:"\u5b57\u4f53",fontsize:"\u6587\u5b57\u5927\u5c0f",forecolor:"\u6587\u5b57\u989c\u8272",hilitecolor:"\u6587\u5b57\u80cc\u666f",bold:"\u7c97\u4f53(Ctrl+B)",italic:"\u659c\u4f53(Ctrl+I)",
underline:"\u4e0b\u5212\u7ebf(Ctrl+U)",strikethrough:"\u5220\u9664\u7ebf",removeformat:"\u5220\u9664\u683c\u5f0f",image:"\u56fe\u7247",multiimage:"\u6279\u91cf\u56fe\u7247\u4e0a\u4f20",flash:"Flash",video:"\u89c6\u9891",audio:"\u97f3\u9891",sketchpad:"\u753b\u677f",camera:"\u62cd\u7167",table:"\u8868\u683c",tablecell:"\u5355\u5143\u683c",hr:"\u63d2\u5165\u6a2a\u7ebf",emoticons:"\u63d2\u5165\u8868\u60c5",link:"\u8d85\u7ea7\u94fe\u63a5",unlink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",fullscreen:"\u5168\u5c4f\u663e\u793a(Esc)",about:"\u5173\u4e8e",print:"\u6253\u5370(Ctrl+P)",filemanager:"\u6587\u4ef6\u7a7a\u95f4",code:"\u63d2\u5165\u7a0b\u5e8f\u4ee3\u7801",map:"Google\u5730\u56fe",baidumap:"\u767e\u5ea6\u5730\u56fe",lineheight:"\u884c\u8ddd",clearhtml:"\u6e05\u7406HTML\u4ee3\u7801",pagebreak:"\u63d2\u5165\u5206\u9875\u7b26",quickformat:"\u4e00\u952e\u6392\u7248",attachment:"\u9644\u4ef6",template:"\u63d2\u5165\u6a21\u677f",anchor:"\u951a\u70b9",yes:"\u786e\u5b9a",no:"\u53d6\u6d88",close:"\u5173\u95ed",
editImage:"\u56fe\u7247\u5c5e\u6027",deleteImage:"\u5220\u9664\u56fe\u7247",editFlash:"Flash\u5c5e\u6027",deleteFlash:"\u5220\u9664Flash",editMedia:"\u89c6\u97f3\u9891\u5c5e\u6027",deleteMedia:"\u5220\u9664\u89c6\u97f3\u9891",editLink:"\u8d85\u7ea7\u94fe\u63a5\u5c5e\u6027",deleteLink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",editAnchor:"\u951a\u70b9\u5c5e\u6027",deleteAnchor:"\u5220\u9664\u951a\u70b9",tableprop:"\u8868\u683c\u5c5e\u6027",tablecellprop:"\u5355\u5143\u683c\u5c5e\u6027",tableinsert:"\u63d2\u5165\u8868\u683c",tabledelete:"\u5220\u9664\u8868\u683c",tablecolinsertleft:"\u5de6\u4fa7\u63d2\u5165\u5217",tablecolinsertright:"\u53f3\u4fa7\u63d2\u5165\u5217",tablerowinsertabove:"\u4e0a\u65b9\u63d2\u5165\u884c",tablerowinsertbelow:"\u4e0b\u65b9\u63d2\u5165\u884c",tablerowmerge:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",tablecolmerge:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",tablerowsplit:"\u62c6\u5206\u884c",tablecolsplit:"\u62c6\u5206\u5217",tablecoldelete:"\u5220\u9664\u5217",tablerowdelete:"\u5220\u9664\u884c",
noColor:"\u65e0\u989c\u8272",pleaseSelectFile:"\u8bf7\u9009\u62e9\u6587\u4ef6\u3002",invalidImg:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8jpg,gif,bmp,png\u683c\u5f0f\u3002",invalidMedia:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb\u683c\u5f0f\u3002",invalidWidth:"\u5bbd\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidHeight:"\u9ad8\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidBorder:"\u8fb9\u6846\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidUrl:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002",invalidRows:"\u884c\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",invalidCols:"\u5217\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",invalidPadding:"\u8fb9\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidSpacing:"\u95f4\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidJson:"\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u3002",uploadSuccess:"\u4e0a\u4f20\u6210\u529f\u3002",cutError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u526a\u5207\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+X)\u6765\u5b8c\u6210\u3002",copyError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u590d\u5236\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+C)\u6765\u5b8c\u6210\u3002",
pasteError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u7c98\u8d34\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u6765\u5b8c\u6210\u3002",ajaxLoading:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadLoading:"\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadError:"\u4e0a\u4f20\u9519\u8bef","plainpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002","wordpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002","link.url":"URL","link.linkType":"\u6253\u5f00\u7c7b\u578b","link.newWindow":"\u65b0\u7a97\u53e3","link.selfWindow":"\u5f53\u524d\u7a97\u53e3","flash.url":"URL","flash.width":"\u5bbd\u5ea6","flash.height":"\u9ad8\u5ea6","flash.upload":"\u4e0a\u4f20","flash.viewServer":"\u6587\u4ef6\u7a7a\u95f4","media.url":"URL","media.width":"\u5bbd\u5ea6","media.height":"\u9ad8\u5ea6","media.autostart":"\u81ea\u52a8\u64ad\u653e","media.upload":"\u4e0a\u4f20",
"media.viewServer":"\u6587\u4ef6\u7a7a\u95f4","image.remoteImage":"\u7f51\u7edc\u56fe\u7247","image.localImage":"\u672c\u5730\u4e0a\u4f20","image.remoteUrl":"\u56fe\u7247\u5730\u5740","image.localUrl":"\u4e0a\u4f20\u6587\u4ef6","image.size":"\u56fe\u7247\u5927\u5c0f","image.width":"\u5bbd","image.height":"\u9ad8","image.resetSize":"\u91cd\u7f6e\u5927\u5c0f","image.align":"\u5bf9\u9f50\u65b9\u5f0f","image.defaultAlign":"\u9ed8\u8ba4\u65b9\u5f0f","image.leftAlign":"\u5de6\u5bf9\u9f50","image.rightAlign":"\u53f3\u5bf9\u9f50","image.imgTitle":"\u56fe\u7247\u8bf4\u660e","image.upload":"\u6d4f\u89c8...","image.viewServer":"\u56fe\u7247\u7a7a\u95f4","multiimage.uploadDesc":"\u5141\u8bb8\u7528\u6237\u540c\u65f6\u4e0a\u4f20<%=uploadLimit%>\u5f20\u56fe\u7247\uff0c\u5355\u5f20\u56fe\u7247\u5bb9\u91cf\u4e0d\u8d85\u8fc7<%=sizeLimit%>","multiimage.startUpload":"\u5f00\u59cb\u4e0a\u4f20","multiimage.clearAll":"\u5168\u90e8\u6e05\u7a7a",
"multiimage.insertAll":"\u5168\u90e8\u63d2\u5165","multiimage.queueLimitExceeded":"\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7\u9650\u5236\u3002","multiimage.fileExceedsSizeLimit":"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236\u3002","multiimage.zeroByteFile":"\u65e0\u6cd5\u4e0a\u4f20\u7a7a\u6587\u4ef6\u3002","multiimage.invalidFiletype":"\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\u3002","multiimage.unknownError":"\u53d1\u751f\u5f02\u5e38\uff0c\u65e0\u6cd5\u4e0a\u4f20\u3002","multiimage.pending":"\u7b49\u5f85\u4e0a\u4f20","multiimage.uploadError":"\u4e0a\u4f20\u5931\u8d25","filemanager.emptyFolder":"\u7a7a\u6587\u4ef6\u5939","filemanager.moveup":"\u79fb\u5230\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939","filemanager.viewType":"\u663e\u793a\u65b9\u5f0f\uff1a","filemanager.viewImage":"\u7f29\u7565\u56fe","filemanager.listImage":"\u8be6\u7ec6\u4fe1\u606f","filemanager.orderType":"\u6392\u5e8f\u65b9\u5f0f\uff1a","filemanager.fileName":"\u540d\u79f0",
"filemanager.fileSize":"\u5927\u5c0f","filemanager.fileType":"\u7c7b\u578b","insertfile.url":"URL","insertfile.title":"\u6587\u4ef6\u8bf4\u660e","insertfile.upload":"\u4e0a\u4f20","insertfile.viewServer":"\u6587\u4ef6\u7a7a\u95f4","table.cells":"\u5355\u5143\u683c\u6570","table.rows":"\u884c\u6570","table.cols":"\u5217\u6570","table.size":"\u5927\u5c0f","table.width":"\u5bbd\u5ea6","table.height":"\u9ad8\u5ea6","table.percent":"%","table.px":"px","table.space":"\u8fb9\u8ddd\u95f4\u8ddd","table.padding":"\u8fb9\u8ddd","table.spacing":"\u95f4\u8ddd","table.align":"\u5bf9\u9f50\u65b9\u5f0f","table.textAlign":"\u6c34\u5e73\u5bf9\u9f50","table.verticalAlign":"\u5782\u76f4\u5bf9\u9f50","table.alignDefault":"\u9ed8\u8ba4","table.alignLeft":"\u5de6\u5bf9\u9f50","table.alignCenter":"\u5c45\u4e2d",
"table.alignRight":"\u53f3\u5bf9\u9f50","table.alignTop":"\u9876\u90e8","table.alignMiddle":"\u4e2d\u90e8","table.alignBottom":"\u5e95\u90e8","table.alignBaseline":"\u57fa\u7ebf","table.border":"\u8fb9\u6846","table.borderWidth":"\u8fb9\u6846","table.borderColor":"\u989c\u8272","table.backgroundColor":"\u80cc\u666f\u989c\u8272","map.address":"\u5730\u5740: ","map.search":"\u641c\u7d22","baidumap.address":"\u5730\u5740: ","baidumap.search":"\u641c\u7d22","anchor.name":"\u951a\u70b9\u540d\u79f0","formatblock.formatBlock":{h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",p:"\u6b63 \u6587"},"fontname.fontName":{SimSun:"\u5b8b\u4f53",NSimSun:"\u65b0\u5b8b\u4f53",FangSong_GB2312:"\u4eff\u5b8b_GB2312",KaiTi_GB2312:"\u6977\u4f53_GB2312",
SimHei:"\u9ed1\u4f53","Microsoft YaHei":"\u5fae\u8f6f\u96c5\u9ed1",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"\u5355\u500d\u884c\u8ddd"},{"1.5":"1.5\u500d\u884c\u8ddd"},{2:"2\u500d\u884c\u8ddd"},{"2.5":"2.5\u500d\u884c\u8ddd"},{3:"3\u500d\u884c\u8ddd"}],"template.selectTemplate":"\u53ef\u9009\u6a21\u677f","template.replaceContent":"\u66ff\u6362\u5f53\u524d\u5185\u5bb9","template.fileList":{"1.html":"\u56fe\u7247\u548c\u6587\u5b57","2.html":"\u8868\u683c","3.html":"\u9879\u76ee\u7f16\u53f7"}};
